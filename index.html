<!DOCTYPE html>
<html>
<head>
<title>External Agent</title>
<script>
    (() => {
  const s = document.createElement('script');
  s.src = 'https://hertz.app.sb.wonderful.ai/embed/wonderful-chat.js';
  s.onload = () => {
    window.temp_Chat = new window.WonderfulChat({
      environment: "hertz.api.sb.wonderful.ai",
      agentId: "15a45faa-a01e-4788-9c3f-b9c3986ae436",
      agentName: 'Βαγγέλης',
      buttonText: 'Chat with us',
      placeholderText: 'Type your message...',
      isRTL: false,
      primaryColor: '#ffcf00',
      accentColor: '#000000',
      textColor: '#333333',
      headerBgColor: '#ffcf00',
      headerTextColor: '#000000',
      userBubbleColor: '#ffcf00',
      userTextColor: '#000000',
      agentBubbleColor: '#ffffff',
      agentTextColor: '#333333',
      windowBgColor: '#ffffff',
      messagesBgColor: '#f5f7fb',
      inputBgColor: '#f5f7fb',
      statusColor: '#4CAF50',
      errorColor: '#F44336',
      logoUrl: 'https://is1-ssl.mzstatic.com/image/thumb/Purple221/v4/fa/88/9e/fa889e4b-e4a6-5341-57f0-0116d2f37f57/AppIcon-0-0-1x_U007emarketing-0-8-0-85-220.png/1200x630wa.png'
    });

    // --- Linkify hotfix ---
    const escapeHtml = (s) =>
      s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');

    const linkify = (text) => {
      const escaped = escapeHtml(text);
      const urlRegex = /https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&\/=]*)/g;
      const emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g;
      return escaped
        .replace(urlRegex, (match) => {
          const trailingPunct = /[.,;:!?)]+$/.exec(match);
          const url = trailingPunct ? match.slice(0, trailingPunct.index) : match;
          const after = trailingPunct ? trailingPunct[0] : '';
          return `<a href="${url}" target="_blank" rel="noopener noreferrer" style="color:#1a73e8;text-decoration:underline">${url}</a>${after}`;
        })
        .replace(emailRegex, (email) => `<a href="mailto:${email}" style="color:#1a73e8;text-decoration:underline">${email}</a>`);
    };

    const processMsg = (el) => {
      if(document.getElementById("sessionId").innerHTML != window.temp_Chat.sessionId)
          document.getElementById("sessionId").innerHTML = window.temp_Chat.sessionId
      if (!el.dataset.linkified) {
        el.innerHTML = linkify(el.textContent);
        el.dataset.linkified = 'true';
      }
    };

    new MutationObserver((mutations) => {
      for (const m of mutations) {
        for (const node of m.addedNodes) {
          if (node.nodeType !== 1) continue;
          if (node.matches?.('.wonderful-message-agent')) processMsg(node);
          node.querySelectorAll?.('.wonderful-message-agent').forEach(processMsg);
        }
      }
    }).observe(document.body, { childList: true, subtree: true });
    // --- End hotfix ---
  };
  document.head.appendChild(s);
  const style = document.createElement("style");
  style.type = "text/css";
  style.textContent = `
    .wonderful-message-agent{
      white-space: pre-line !important;
    }
  `;
  document.head.appendChild(style);
  })();
  
</script>
    <style>
  body {
    background: #f4f4f4;
    justify-content: center;
    align-items: center;
    height: 50vh;
    font-family: 'Segoe UI', sans-serif;
  }

  .post-it {
    width: 400px;
    background: #fffb88;
    padding: 20px;
    box-shadow: 
      0 4px 6px rgba(0, 0, 0, 0.2),
      inset 0 -10px 20px rgba(0, 0, 0, 0.05);
    position: relative;
    font-size: 16px;
    line-height: 1.2;
  }

  /* Folded corner effect */
  .post-it::after {
    content: "";
    position: absolute;
    bottom: 0;
    right: 0;
    width: 0;
    height: 0;
    border-left: 40px solid transparent;
    border-top: 40px solid rgba(0, 0, 0, 0.1);
  }
</style>
</head>
<body style="background:beige">
    <div class="post-it" dir="ltr" lang="en">
      <h1>Δοκιμαστικά δεδομένα</h1>
        <b>ΑΦΜ:094420381</b><br><br> 
        <b>Πινακίδες</b>
        <ul>
            <li>XZK2922</li><li>ZTE4984</li><li>XZI9480</li><li>XZB3192</li><li>XEN3982</li><li>XZI9469</li><li>XHN4138</li>
        </ul>
    <h1>Feedback file</h1>
     <a href="https://autohellas-my.sharepoint.com/:x:/g/personal/gvarvates_autohellas_gr/IQA18MzfhF7IQblL6ssFuZ92AfnliZMK6rV6EXssGDa81f8?e=V7enB0&nav=MTVfezAwMDAwMDAwLTAwMDEtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMH0" target="_blank" >Click here to give feedback</a> 
    <h1>Session Id</h1>
        <span id="sessionId"></span>
    </div>
    
</body>
</html>
